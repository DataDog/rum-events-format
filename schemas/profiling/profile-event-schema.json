{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "profiling/profile-event-schema.json",
  "title": "ProfileEvent",
  "type": "object",
  "description": "Schema of a Profile Event metadata.",
  "allOf": [
    {
      "$ref": "profile-event-attributes-schema.json"
    },
    {
      "required": ["attachments", "start", "end", "family", "runtime", "version", "tags_profiler"],
      "properties": {
        "attachments": {
          "type": "array",
          "items": {
            "type": "string",
            "readOnly": true
          },
          "description": "List of attachment filenames.",
          "readOnly": true
        },
        "start": {
          "type": "string",
          "description": "Start time as ISO 8601 date string (yyyy-MM-dd'T'HH:mm:ss.SSS'Z').",
          "readOnly": true
        },
        "end": {
          "type": "string",
          "description": "End time marking when the profile ended, as ISO 8601 date string (yyyy-MM-dd'T'HH:mm:ss.SSS'Z').",
          "readOnly": true
        },
        "family": {
          "type": "string",
          "enum": ["android", "chrome", "ios"],
          "description": "Profiler family.",
          "readOnly": true
        },
        "runtime": {
          "type": "string",
          "enum": ["android", "chrome", "ios"],
          "description": "Runtime environment.",
          "readOnly": true
        },
        "version": {
          "type": "integer",
          "description": "Profile ingestion event version.",
          "readOnly": true
        },
        "tags_profiler": {
          "type": "string",
          "description": "Comma-separated profiler tags.",
          "readOnly": true
        }
      }
    }
  ]
}
