{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "profiling/profile-event-schema.json",
  "title": "ProfileEvent",
  "type": "object",
  "description": "Schema of a Profile Event metadata.",
  "allOf": [
    {
      "$ref": "profile-event-attributes-schema.json"
    },
    {
      "required": ["attachments", "start", "end", "family", "runtime", "version", "tags_profiler", "_dd"],
      "properties": {
        "attachments": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of attachment filenames.",
          "readOnly": true
        },
        "start": {
          "type": "string",
          "description": "Start time as ISO 8601 date string (yyyy-MM-dd'T'HH:mm:ss.SSS'Z').",
          "readOnly": true
        },
        "end": {
          "type": "string",
          "description": "End time marking when the profile ended, as ISO 8601 date string (yyyy-MM-dd'T'HH:mm:ss.SSS'Z').",
          "readOnly": true
        },
        "family": {
          "type": "string",
          "enum": ["android", "chrome", "ios"],
          "description": "Profiler family.",
          "readOnly": true
        },
        "runtime": {
          "type": "string",
          "enum": ["android", "chrome", "ios"],
          "description": "Runtime environment.",
          "readOnly": true
        },
        "format": {
          "type": "string",
          "enum": ["json", "pprof"],
          "description": "Profile data format. Browser SDK uses 'json', iOS SDK uses 'pprof'. Optional as some SDKs include this in tags_profiler instead.",
          "readOnly": true
        },
        "version": {
          "type": "integer",
          "description": "Profile ingestion event version.",
          "readOnly": true
        },
        "tags_profiler": {
          "type": "string",
          "description": "Comma-separated profiler tags.",
          "readOnly": true
        },
        "_dd": {
          "type": "object",
          "description": "Datadog internal metadata.",
          "properties": {
            "clock_drift": {
              "type": "number",
              "description": "Clock drift value. Used by Browser SDK.",
              "readOnly": true
            }
          },
          "readOnly": true
        }
      }
    }
  ]
}
